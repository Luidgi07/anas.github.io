<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>PS4/PS5 Menu – Currículo 1</title>
<style>
/* ===== BASE ===== */
html, body {
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
body {
  background: radial-gradient(circle at top, #1e2a3d 0%, #05070b 55%, #000000 100%);
  font-family: 'Segoe UI', Arial, sans-serif;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: flex-start;
  position: relative;
  padding-top: 60px;
  transition: background 0.4s ease;
}

/* ===== OVERLAY VÍDEO INICIAL ===== */
#introVideoWrapper {
  position: fixed;
  inset: 0;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100000;
}
#introVideoWrapper video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ===== OVERLAY BRANCO ===== */
#whiteOverlay {
  position: fixed;
  inset: 0;
  background: #ffffff;
  z-index: 99999;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.8s ease;
}
#whiteOverlay.visible { opacity: 1; }
#whiteOverlay.fade-out { opacity: 0; }

/* ===== MODAL CENTRAL (RESUMO / ÍNDICE) ===== */
#infoModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9000;
}
#infoModalOverlay.visible { display: flex; }
#infoModal {
  background: rgba(9,16,32,0.96);
  border-radius: 18px;
  padding: 26px 30px 22px;
  max-width: 520px;
  width: 90%;
  color: #f5f7fa;
  box-shadow: 0 18px 45px rgba(0,0,0,0.8);
  border: 1px solid rgba(255,255,255,0.18);
  backdrop-filter: blur(18px);
  position: relative;
}
#infoModal h2 {
  margin: 0 0 10px;
  font-size: 1.4em;
  letter-spacing: .16em;
  text-transform: uppercase;
}
#infoModal p {
  margin: 4px 0 10px;
  font-size: 0.95em;
  line-height: 1.5em;
}
#infoModal ul {
  margin: 8px 0 0;
  padding-left: 18px;
  font-size: 0.93em;
}
#infoModal ul li { margin-bottom: 4px; }
#infoModal .modal-buttons {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}
#infoModal .modal-btn {
  background: linear-gradient(135deg,#14aaff 60%,#75d5ff 120%);
  border: none;
  color: #fff;
  padding: 7px 20px;
  font-weight: 600;
  border-radius: 999px;
  cursor: pointer;
  font-size: 0.88em;
}
#infoModal .modal-btn.secondary {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.35);
}

/* ===== BOTÕES LATERAIS TOPO ESQ ===== */
#infoToggleBtn,
#biblioToggleBtn {
  position: fixed;
  left: 32px;
  z-index: 8000;
  background: rgba(10,20,40,0.90);
  color: #eaf5ff;
  border-radius: 0 999px 999px 0;
  border: 1px solid rgba(66,170,255,0.6);
  padding: 8px 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 0.78em;
  letter-spacing: .08em;
  text-transform: uppercase;
  box-shadow: 0 6px 16px rgba(0,0,0,0.7);
}
#infoToggleBtn { top: 90px; }
#biblioToggleBtn { top: 130px; } /* logo por baixo */
#infoToggleBtn span.icon,
#biblioToggleBtn span.icon {
  width: 8px;
  height: 26px;
  border-radius: 999px;
  background: linear-gradient(180deg,#14aaff,#75d5ff);
}
#infoToggleBtn.hidden { display: none; }

/* ===== MODAL BIBLIOGRAFIA ===== */
#biblioModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9000;
}
#biblioModalOverlay.visible { display: flex; }
#biblioModal {
  background: rgba(9,16,32,0.96);
  border-radius: 18px;
  padding: 24px 30px 22px;
  max-width: 520px;
  width: 90%;
  color: #f5f7fa;
  box-shadow: 0 18px 45px rgba(0,0,0,0.8);
  border: 1px solid rgba(255,255,255,0.18);
  backdrop-filter: blur(18px);
}
#biblioModal h2 {
  margin: 0 0 10px;
  font-size: 1.35em;
  letter-spacing: .12em;
  text-transform: uppercase;
}
#biblioModal p {
  margin: 4px 0 10px;
  font-size: 0.95em;
  line-height: 1.5em;
}
#biblioModal .modal-buttons {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
}
#biblioModal .modal-btn {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.35);
  color: #fff;
  padding: 7px 20px;
  font-weight: 600;
  border-radius: 999px;
  cursor: pointer;
  font-size: 0.88em;
}

/* ===== TOP HUD (SEM ÍCONES) ===== */
.top-hud {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 58px;
  background: rgba(18,26,36,0.90);
  display: flex;
  align-items: center;
  padding: 0 32px;
  z-index: 7000;
  border-bottom: 2.5px solid #42aaff;
  box-shadow: 0 2px 18px #12244477;
}
.hud-left, .hud-center, .hud-right {
  display: flex; align-items: center; gap: 18px;
}
.hud-center { margin-left: auto; margin-right: 80px; }
.hud-time-date {
  color: #e9f5fa;
  font-size: 1.07em;
  font-family: 'Segoe UI Mono', monospace;
}
.profile-area {
  display: flex;
  align-items: center;
  gap: 11px;
  background: rgba(42,62,94,0.82);
  border-radius: 9px;
  padding: 5px 55px;
  border: 1.5px solid #42aaff60;
}
.profile-img {
  width: 38px;
  height: 38px;
  border-radius: 7px;
  object-fit: cover;
  border: 2.5px solid #42aaff;
}
.profile-name {
  color: #f3f8fc;
  font-weight: 600;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ===== BACKGROUNDS ===== */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  z-index: -2;
  opacity: 0;
  pointer-events: none;
  background: transparent;
  transition: opacity .8s cubic-bezier(.4,1,.72,1);
}
body.bg-dynamic-1::before { background: url('Design sem nome (5).png') center/cover no-repeat; opacity: 1; }
body.bg-dynamic-2::before { background: url('Design sem nome (6).png') center/cover no-repeat; opacity: 1; }
body.bg-dynamic-3::before { background: url('Design sem nome (7).png') center/cover no-repeat; opacity: 1; }
body.bg-dynamic-4::before { background: url('Design sem nome (8).png') center/cover no-repeat; opacity: 1; }
body::after {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  z-index: -1;
  pointer-events: none;
  background: linear-gradient(
    to bottom,
    rgba(18,26,36,.75) 0%,
    rgba(18,26,36,.8) 30%,
    rgba(18,26,36,.4) 60%,
    rgba(18,26,36,0) 90%
  );
  opacity: 0;
  transition: opacity 1.1s cubic-bezier(.36,1,.72,1);
}
body.hub-open::after {
  opacity: 1;
  background: radial-gradient(circle at top,
    rgba(0,0,0,0.55) 0%,
    rgba(0,0,0,0.78) 45%,
    rgba(0,0,0,0.90) 100%);
}
body.gradient-fade::after { opacity: 1; }

/* ===== DASHBOARD / CARROSSEL ===== */
.dashboard-container {
  position: fixed;
  left: 0; bottom: 0;
  width: 100vw;
  z-index: 10;
  transition: transform .65s cubic-bezier(.42,1,.72,1);
}
.dashboard-container.expanded { transform: translateY(-340px); }

.ps4-dashboard {
  width: 100vw;
  padding: 80px 0 120px 90px;
  overflow: hidden;
}
.carousel-inner {
  display: flex;
  align-items: flex-end;
  gap: 38px;
  transition: transform .43s cubic-bezier(.42,1,.72,1);
}
.menu-item-wrapper {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 24px;
}
.menu-item {
  width: 160px;
  height: 240px;
  background: #23283a;
  box-shadow: 0 8px 32px #000c;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2.5px solid transparent;
  cursor: pointer;
  transition: transform .22s cubic-bezier(.32,1.35,.62,1),
              box-shadow .18s, border .18s;
}
.menu-item.selected {
  transform: scale(1.22);
  box-shadow: 0 0 40px 5px #42aaffcc, 0 5px 35px #000c;
  border-color: #42aaff;
  border-bottom: none;
}
.menu-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ===== HUD BAIXO ===== */
.hud-row {
  display: none;
  position: absolute;
  left: 0; top: 100%;
  align-items: stretch;
  z-index: 40;
}
.menu-item.selected ~ .hud-row {
  display: flex;
  transform: translateY(18px);
  left: -18px;
  animation: boxin .21s;
}
@keyframes boxin {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
.hud-start {
  height: 48px;
  background: rgba(26,30,43,.98);
  border: 2.5px solid #42aaff;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 160px;
  margin-right: 12px;
}
.menu-item.selected ~ .hud-row .hud-start {
  width: calc(160px * 1.22);
}
.hud-btn {
  background: linear-gradient(135deg,#14aaff 60%,#75d5ff 120%);
  color: #fff;
  border: none;
  font-weight: 600;
  letter-spacing: 2px;
  padding: 8px 32px;
  cursor: pointer;
  height: 32px;
}
.hud-title {
  min-width: 260px;
  height: 48px;
  display: flex;
  align-items: center;
  background: rgba(10,14,28,.88);
  border-radius: 16px;
  border: 1.5px solid rgba(255,255,255,.12);
  padding: 0 22px;
  font-size: 1.05em;
  font-weight: 600;
  color: #f5f7fa;
  cursor: pointer;
  backdrop-filter: blur(14px);
}
.hud-title .down-arrow {
  margin-left: 10px;
  color: #42aaff;
  animation: bounce 1.4s infinite;
}
@keyframes bounce {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(5px); }
}

/* CD animação */
.cd-label-wrap {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}
.cd-small {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ffffff 0%, #dfe3eb 40%, #7f8aa5 70%, #151924 100%);
  border: 3px solid #111722;
  box-shadow: 0 0 8px rgba(0,0,0,.85);
  position: relative;
  animation: cdRotate 4s linear infinite, cdWobble 3s ease-in-out infinite;
}
.cd-small::before {
  content: "";
  position: absolute;
  inset: 28%;
  border-radius: 50%;
  background: radial-gradient(circle, #0b1724 0%, #1e3f6a 70%);
}
@keyframes cdRotate {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}
@keyframes cdWobble {
  0%,100% { transform: translateX(0); }
  50%     { transform: translateX(4px); }
}

/* ===== BOTÃO CIMA ===== */
.scroll-top-btn {
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, -120%);
  background: transparent;
  border: none;
  width: 38px;
  height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 20;
  padding: 0;
}
.scroll-top-btn svg {
  width: 32px;
  height: 32px;
  stroke: #1da1f2;
}

/* ===== HUB EM BAIXO (GENÉRICO) ===== */
.game-details {
  position: fixed;
  left: 0; bottom: 0;
  width: 100vw;
  padding: 40px 80px 60px;
  display: flex;
  justify-content: flex-start;
  align-items: flex-end;
  opacity: 0;
  pointer-events: none;
  transform: translateY(100%);
  transition: opacity .7s cubic-bezier(.42,1,.72,1),
              transform .7s cubic-bezier(.42,1,.72,1);
  z-index: 12;
}
.game-details.visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

/* layout conteúdo hub */
.game-details-inner {
  width: 100%;
  max-width: 1500px;
  display: grid;
  grid-template-columns: 340px 1.2fr 220px;
  gap: 26px;
  align-items: start;
}
.cover-main {
  width: 100%;
  height: 210px;
  border-radius: 20px;
  border: 2px solid #42aaff;
  object-fit: cover;
}
.game-details .info {
  color: #f5f7fa;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  font-size: .96em;
  line-height: 1.4em;
}
.game-details .info h1 {
  font-size: 2.1em;
  letter-spacing: .14em;
  text-transform: uppercase;
  margin: 0 0 4px;
  text-shadow: 0 3px 10px #000;
  font-weight: 600;
}
.game-details .info .tagline {
  margin: 0 0 8px;
  opacity: .9;
  font-weight: 500;
}
.game-details .info p { margin: 0 0 10px; }
.game-details .buttons {
  margin-top: 10px;
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}
.game-details .buttons button {
  background: linear-gradient(135deg,#14aaff 60%,#75d5ff 120%);
  border: none;
  color: #fff;
  padding: 7px 22px;
  font-weight: 600;
  border-radius: 999px;
  cursor: pointer;
}
.side-column {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.side-card {
  background: rgba(8,12,24,.65);
  border-radius: 14px;
  padding: 6px 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(12px);
}
.side-card img {
  width: 60px;
  height: 42px;
  object-fit: contain;
  border-radius: 10px;
}
.side-card .text {
  font-size: .8em;
  color: #dfe8ff;
}

/* ===== UX HINT ===== */
.hub-hint {
  position: fixed;
  left: 50%;
  bottom: 26px;
  transform: translateX(-50%);
  padding: 6px 16px;
  background: rgba(10,14,28,0.92);
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.25);
  color: #e5f2ff;
  font-size: 0.82em;
  letter-spacing: .06em;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0;
  pointer-events: none;
  z-index: 30;
  transition: opacity .4s ease;
}
.hub-hint.visible {
  opacity: 1;
  pointer-events: auto;
}
.hub-hint span.key {
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid rgba(255,255,255,0.4);
  font-size: 0.78em;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 1200px) {
  .game-details {
    padding: 28px 32px 40px;
  }
  .game-details-inner {
    max-width: 100%;
    grid-template-columns: 260px 1fr 260px;
  }
  .side-column { gap: 6px; }
  .cover-main { height: 180px; }
}
@media (max-width: 900px) {
  .ps4-dashboard { padding-left: 20px; }
  .carousel-inner { gap: 22px; }
  .game-details-inner { grid-template-columns: 1fr; }
}

/* ===== LOADING HUD ===== */
.hud-start.loading { background: #23283a !important; }
.loading-bar-simple {
  width: 96%;
  height: 18px;
  background: #23283a;
  border: 1.5px solid #161b22;
  overflow: hidden;
}
.loading-bar-simple .fill {
  background: linear-gradient(90deg,#14aaff,#75d5ff);
  height: 100%;
  width: 0%;
  transition: width .2s linear;
}

/* ===== SCREEN FADE ===== */
#screen-fade {
  position:fixed;
  top:0; left:0; width:100vw; height:100vh;
  background:black; opacity:0; pointer-events:none;
  transition:opacity .7s ease; z-index:6000;
}
</style>
</head>
<body>

<!-- VÍDEO INTRO -->
<div id="introVideoWrapper">
  <video id="introVideo" src="video (2).mp4" autoplay muted playsinline></video>
</div>

<div id="whiteOverlay" class="visible"></div>

<!-- MODAL RESUMO / ÍNDICE -->
<div id="infoModalOverlay">
  <div id="infoModal">
    <h2>OBRIGADO POR VISITAR</h2>
    <p>Obrigado por explorares este currículo em estilo interface PS4/PS5. Aqui encontras um resumo rápido do conteúdo disponível.</p>
    <p><strong>Índice rápido:</strong></p>
    <ul>
      <li><strong>Documentação</strong> – visão geral do projeto e contexto.</li>
      <li><strong>Autobiografia</strong> – percurso pessoal e motivação.</li>
      <li><strong>UFCD</strong> – evidências da unidade de formação.</li>
      <li><strong>Estágio</strong> – atividades e aprendizagens.</li>
      <li><strong>Última Reflexão</strong> – síntese crítica do percurso.</li>
      <li><strong>Certificados</strong> – provas formais de competências.</li>
    </ul>
    <div class="modal-buttons">
      <button class="modal-btn secondary" id="modalCloseBtn">Fechar</button>
    </div>
  </div>
</div>

<!-- MODAL BIBLIOGRAFIA -->
<div id="biblioModalOverlay">
  <div id="biblioModal">
    <h2>BIBLIOGRAFIA</h2>
    <p>Espaço para listagem das referências bibliográficas usadas nos conteúdos deste portefólio.</p>
    <div class="modal-buttons">
      <button class="modal-btn" id="biblioCloseBtn">Fechar</button>
    </div>
  </div>
</div>

<!-- BOTÕES LATERAIS TOPO ESQ -->
<button id="infoToggleBtn" class="hidden">
  <span class="icon"></span>
  <span>Resumo / Índice</span>
</button>

<button id="biblioToggleBtn">
  <span class="icon"></span>
  <span>Bibliografia</span>
</button>

<!-- HUD TOPO -->
<div class="top-hud">
  <div class="hud-left">
    <span class="hud-time-date" id="hudTimeDate"></span>
  </div>
  <div class="hud-center">
    <div class="profile-area">
      <img src="Áreas (6).png" class="profile-img" alt="Perfil">
      <span class="profile-name">Luís Correia</span>
    </div>
  </div>
  <div class="hud-right"></div>
</div>

<!-- DASHBOARD -->
<div class="dashboard-container" id="dashCont">
  <div class="ps4-dashboard">
    <div class="carousel-inner" id="carousel">

      <!-- Documentação -->
      <div class="menu-item-wrapper">
        <div class="menu-item selected" tabindex="0">
          <img src="doc.png" alt="Documentação">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-documentacao">START</button>
          </div>
          <div class="hud-title">Documentação</div>
        </div>
      </div>

      <!-- Autobiografia -->
      <div class="menu-item-wrapper">
        <div class="menu-item" tabindex="0">
          <img src="auto.png" alt="Autobiografia">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-autobiografia">START</button>
          </div>
          <div class="hud-title">Autobiografia</div>
        </div>
      </div>

      <!-- UFCD -->
      <div class="menu-item-wrapper">
        <div class="menu-item" tabindex="0">
          <img src="ufcd.png" alt="UFCD">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-ufcd">START</button>
          </div>
          <div class="hud-title">UFCD</div>
        </div>
      </div>

      <!-- Estágio -->
      <div class="menu-item-wrapper">
        <div class="menu-item" tabindex="0">
          <img src="estagio.png" alt="Estágio">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-estagio">START</button>
          </div>
          <div class="hud-title">Estágio</div>
        </div>
      </div>

      <!-- Última Reflexão -->
      <div class="menu-item-wrapper">
        <div class="menu-item" tabindex="0">
          <img src="ultima-reflexao.png" alt="Última Reflexão">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-ultima">START</button>
          </div>
          <div class="hud-title">Última Reflexão</div>
        </div>
      </div>

      <!-- Certificados -->
      <div class="menu-item-wrapper">
        <div class="menu-item" tabindex="0">
          <img src="certificados.png" alt="Certificados">
        </div>
        <div class="hud-row">
          <div class="hud-start">
            <button class="hud-btn" id="hud-start-certificados">START</button>
          </div>
          <div class="hud-title">Certificados</div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Hubs vazios para manter lógica (podem ser preenchidos depois) -->
<div class="game-details" id="gameDetails-1"></div>
<div class="game-details" id="gameDetails-2"></div>
<div class="game-details" id="gameDetails-3"></div>
<div class="game-details" id="gameDetails-4"></div>

<div id="hubHint" class="hub-hint">
  <span>Carrega</span>
  <span class="key">START</span>
  <span>ou</span>
  <span class="key">↓</span>
  <span>para ver mais</span>
</div>

<div id="screen-fade"></div>

<script>
function updateHudTime() {
  const el = document.getElementById('hudTimeDate');
  if (!el) return;
  const now = new Date();
  el.textContent =
    now.toLocaleDateString('pt-PT',{day:'2-digit',month:'2-digit'}) + ' ' +
    now.toLocaleTimeString('pt-PT',{hour:'2-digit',minute:'2-digit'});
}
setInterval(updateHudTime,1000);
updateHudTime();

const carousel = document.getElementById('carousel');
const allItems = carousel.querySelectorAll('.menu-item');
const hudRows = document.querySelectorAll('.hud-row');
const hudTitles = carousel.querySelectorAll('.hud-title');
const dashboardsContainer = document.getElementById('dashCont');
const gameDetailsPanels = [
  null,
  document.getElementById('gameDetails-1'),
  document.getElementById('gameDetails-2'),
  document.getElementById('gameDetails-3'),
  document.getElementById('gameDetails-4')
];
const hubHint = document.getElementById('hubHint');

let selected = 0;
let expanded = false;
let hintShown = false;
const quadW = 160;
const gap = 38;

function moveCarousel(idx) {
  carousel.style.transform =
    `translateX(calc(50vw - 90px - ${(quadW + gap) * idx + quadW / 2}px))`;
}
function clearWallpapers() {
  document.body.classList.remove(
    'bg-dynamic-1','bg-dynamic-2','bg-dynamic-3','bg-dynamic-4',
    'bg-dynamic','gradient-fade','hub-open'
  );
}
function hideHint() { hubHint.classList.remove('visible'); }
function showHintOnce() {
  if (hintShown) return;
  hintShown = true;
  hubHint.classList.add('visible');
  setTimeout(hideHint, 4000);
}

function updateHUD(idx) {
  if (expanded || idx === selected) return;
  allItems[selected].classList.remove('selected');
  selected = idx;
  allItems[selected].classList.add('selected');
  hudRows.forEach((row, i) => {
    row.style.display = (i === selected) ? 'flex' : 'none';
  });
  moveCarousel(idx);
  clearWallpapers();
}
function expandDetails() {
  if (![1,2,3,4].includes(selected) || expanded) return;
  expanded = true;
  dashboardsContainer.classList.add('expanded');
  for (let i = 1; i <= 4; i++) {
    if (gameDetailsPanels[i]) gameDetailsPanels[i].classList.remove('visible');
  }
  if (gameDetailsPanels[selected]) gameDetailsPanels[selected].classList.add('visible');
  hudTitles.forEach((t, i) => t.classList.toggle('exp-arrow', i === selected));
  clearWallpapers();
  document.body.classList.add('bg-dynamic-' + selected,'bg-dynamic','gradient-fade','hub-open');
  showHintOnce();
}
function collapseDetails() {
  expanded = false;
  dashboardsContainer.classList.remove('expanded');
  for (let i = 1; i <= 4; i++) {
    if (gameDetailsPanels[i]) gameDetailsPanels[i].classList.remove('visible');
  }
  hudTitles.forEach(t => t.classList.remove('exp-arrow'));
  clearWallpapers();
  hideHint();
}

hudTitles.forEach((t, i) => {
  t.addEventListener('click', () => {
    if (selected === i && !expanded) expandDetails();
  });
});

document.addEventListener('keydown', e => {
  if (!expanded && selected > 0 && (e.key === 'ArrowDown' || e.key === 'PageDown')) expandDetails();
  if (expanded && (e.key === 'Escape' || e.key === 'ArrowUp')) collapseDetails();
  if (expanded) return;
  if (e.key === 'ArrowRight' && selected < allItems.length - 1) updateHUD(selected + 1);
  if (e.key === 'ArrowLeft' && selected > 0) updateHUD(selected - 1);
});

allItems.forEach((item, idx) => {
  item.addEventListener('focus', () => { if (!expanded) updateHUD(idx); });
  item.addEventListener('click', () => { if (!expanded) updateHUD(idx); });
  item.addEventListener('mouseover', () => { if (!expanded) updateHUD(idx); });
});

moveCarousel(selected);
hudRows.forEach((row, i) => {
  row.style.display = (i === selected) ? 'flex' : 'none';
});

function scrollToCarousel() {
  collapseDetails();
  document.querySelector(".carousel-inner")
          .scrollIntoView({behavior:'smooth',block:'start'});
}

const screenFade = document.getElementById('screen-fade');
function genericHudLoading(button, url) {
  if (!button || button.disabled) return;
  button.disabled = true;
  const hudStartDiv = button.closest('.hud-start');
  hudStartDiv.classList.add('loading');
  hudStartDiv.innerHTML = '';
  const loadingBar = document.createElement('div');
  loadingBar.classList.add('loading-bar-simple');
  const fill = document.createElement('div');
  fill.classList.add('fill');
  loadingBar.appendChild(fill);
  hudStartDiv.appendChild(loadingBar);
  let widthPercent = 0;
  let frame = 0;
  const totalDuration = 3000;
  const frameCount = 60;
  const increment = 100 / frameCount;
  const frameDuration = totalDuration / frameCount;
  const interval = setInterval(() => {
    frame++;
    widthPercent += increment;
    if (widthPercent > 100) widthPercent = 100;
    fill.style.width = widthPercent + '%';
    if (frame >= frameCount) {
      clearInterval(interval);
      setTimeout(() => {
        screenFade.style.opacity = '1';
        screenFade.style.pointerEvents = 'none';
        setTimeout(() => { window.location.href = url; }, 700);
      }, 400);
    }
  }, frameDuration);
}

/* START buttons */
document.getElementById('hud-start-documentacao')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'documentacao.html');
});
document.getElementById('hud-start-autobiografia')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'autobiografia.html');
});
document.getElementById('hud-start-ufcd')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'ufcd.html');
});
document.getElementById('hud-start-estagio')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'estagio.html');
});
document.getElementById('hud-start-ultima')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'ultima-reflexao.html');
});
document.getElementById('hud-start-certificados')?.addEventListener('click', e => {
  e.preventDefault();
  genericHudLoading(e.currentTarget, 'certificados.html');
});

/* VÍDEO INTRO + FADE + MODAL RESUMO */
const introVideo = document.getElementById('introVideo');
const introWrapper = document.getElementById('introVideoWrapper');
const whiteOverlay = document.getElementById('whiteOverlay');
const infoModalOverlay = document.getElementById('infoModalOverlay');
const infoToggleBtn = document.getElementById('infoToggleBtn');
const modalCloseBtn = document.getElementById('modalCloseBtn');

function showModal() { infoModalOverlay.classList.add('visible'); }
function hideModal() {
  infoModalOverlay.classList.remove('visible');
  infoToggleBtn.classList.remove('hidden');
}
modalCloseBtn.addEventListener('click', hideModal);
infoToggleBtn.addEventListener('click', showModal);

function startWhiteFadeSequence() {
  whiteOverlay.classList.add('visible');
  introWrapper.style.opacity = '0';
  introWrapper.style.transition = 'opacity 0.6s ease';
  setTimeout(() => { introWrapper.style.display = 'none'; }, 600);
  setTimeout(() => {
    whiteOverlay.classList.add('fade-out');
    setTimeout(() => {
      whiteOverlay.style.display = 'none';
      showModal();
      infoToggleBtn.classList.add('hidden');
    }, 1900);
  }, 200);
}
introVideo.addEventListener('ended', startWhiteFadeSequence);
setTimeout(() => {
  if (!introWrapper.style.display || introWrapper.style.display !== 'none') {
    startWhiteFadeSequence();
  }
}, 15000);

/* MODAL BIBLIOGRAFIA */
const biblioModalOverlay = document.getElementById('biblioModalOverlay');
const biblioToggleBtn = document.getElementById('biblioToggleBtn');
const biblioCloseBtn = document.getElementById('biblioCloseBtn');
function showBiblioModal() { biblioModalOverlay.classList.add('visible'); }
function hideBiblioModal() { biblioModalOverlay.classList.remove('visible'); }
biblioToggleBtn.addEventListener('click', showBiblioModal);
biblioCloseBtn.addEventListener('click', hideBiblioModal);
</script>
</body>
</html>
